function fig = ImageAdjustToolWindow(imT)
%IMAGEADJUSTTOOLWINDOW/IMTWINDOW(private)

% place window beside figure if possible
dum=get(0,'Units');
set(0,'Units','pixels');
screenSize = get(0,'ScreenSize');
set(0,'Units',dum);
dum=get(imT.figure,'Units');
set(imT.figure,'Units','pixels');
figPos=get(imT.figure,'Position');
set(imT.figure,'Units',dum);

%
winOffset = [8 20] ;
winWidth = 285;
winHeight = 360;
winPos = [0 0 winWidth winHeight];
winPos(2)= figPos(2)-(winHeight-figPos(4))+winOffset(2);
if(winPos(2)<0)
   winPos(2)=0;
end;

if((figPos(1)-winWidth-winOffset(1))>0)   
   winPos(1)=figPos(1)-winWidth-winOffset(1);
elseif((figPos(1)+figPos(3)+winWidth+winOffset(1))<screenSize(3))
   winPos(1)=figPos(1)+figPos(3)+winOffset(1);
else
   winPos(1)=winOffset(1);
end;

h0 = figure('Units','pixels', ...
	'Color',[0.8 0.8 0.8], ...
	'MenuBar','none', ...
	'Name','Gamma Correction', ...
	'NumberTitle','off', ...
	'Position',winPos, ...
	'Resize','off', ...
	'Tag','IMAGE_ADJUST_TOOL', ...
	'UserData',1);
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[157.5 11.25 45 15], ...
	'String','Close', ...
	'Tag','CLOSE');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[123.75 236.25 33.75 15], ...
	'String','0', ...
	'Style','edit', ...
	'Tag','IN1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[168.75 236.25 33.75 15], ...
	'String','1', ...
	'Style','edit', ...
	'Tag','IN2');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[11.25 236.25 90 11.25], ...
	'String','Input intensity interval:', ...
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[11.25 213.75 90 11.25], ...
	'String','Output intensity interval:', ...
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[168.75 213.75 33.75 15], ...
	'String','1', ...
	'Style','edit', ...
	'Tag','OUT2');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[123.75 213.75 33.75 15], ...
	'String','0', ...
	'Style','edit', ...
	'Tag','OUT1');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[1 1 1], ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[50 191.25 45 15], ...
	'String','1', ...
	'Style','edit', ...
	'Tag','GAMMAEDIT');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
   'ListboxTop',0, ...
   'Min',0, ...
   'Max',2, ...
   'SliderStep',[0.01 .1], ...
	'Position',[101.25 191.25 101.25 15], ...
	'Style','slider', ...
	'Tag','GAMMA', ...
	'Value',1);
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
	'BackgroundColor',[0.8 0.8 0.8], ...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[11.25 191.25 30 11.25], ...
	'String','Gamma:', ...
	'Style','text', ...
	'Tag','StaticText2');
h1 = axes('Parent',h0, ...
	'Units','pixels', ...
	'Box','on', ...
	'CameraUpVector',[0 1 0], ...
	'Color',[1 1 1], ...
	'Position',[31 61 240 180], ...
	'Tag','Axes1', ...
	'XColor',[0 0 0], ...
	'XGrid','on', ...
	'YColor',[0 0 0], ...
	'YGrid','on', ...
	'ZColor',[0 0 0]);
h2 = text('Parent',h1, ...
	'Color',[0 0 0], ...
	'HandleVisibility','off', ...
	'HorizontalAlignment','center', ...
	'Position',[0.497907949790795 -0.1340782122905029 9.160254037844386], ...
	'Tag','Axes1Text4', ...
	'VerticalAlignment','cap');
set(get(h2,'Parent'),'XLabel',h2);
h2 = text('Parent',h1, ...
	'Color',[0 0 0], ...
	'HandleVisibility','off', ...
	'HorizontalAlignment','center', ...
	'Position',[-0.1213389121338912 0.4916201117318435 9.160254037844386], ...
	'Rotation',90, ...
	'Tag','Axes1Text3', ...
	'VerticalAlignment','baseline');
set(get(h2,'Parent'),'YLabel',h2);
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
   'Callback',['ImAdjustToolCB(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[22.5 11.25 45 15], ...
	'String','Reset', ...
   'Tag','RESET');
h1 = uicontrol('Parent',h0, ...
	'Units','points', ...
   'Callback',['AutoAdjust(get(gcf,' 39 'Userdata' 39 '))'],...
	'ListboxTop',0, ...
	'Position',[90 11.25 45 15], ...
	'String','Adjust', ...
   'Tag','ADJUST');
if nargout > 0, fig = h0; end
